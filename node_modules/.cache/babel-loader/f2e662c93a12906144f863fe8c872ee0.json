{"remainingRequest":"F:\\emanager\\node_modules\\babel-loader\\lib\\index.js!F:\\emanager\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\emanager\\src\\mock\\ws-api-mock.js","dependencies":[{"path":"F:\\emanager\\src\\mock\\ws-api-mock.js","mtime":1604888126237},{"path":"F:\\emanager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\emanager\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\emanager\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7Ci8vIHdlYnNvY2tldCBhcGkg5omT5qGpCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CnZhciBtb2NrRGF0YSA9IHsKICAic3VjY2VzcyI6IHRydWUsCiAgInRvdGFsIjogNSwKICAidW5yZWFkTnVtIjogNCwKICAiZGF0YSI6IFt7CiAgICAiaWQiOiAxLAogICAgInR5cGUiOiAid2FybmluZyIsCiAgICAidGl0bGUiOiAi57O757uf5raI5oGvIiwKICAgICJtZXNzYWdlIjogIuaCqOeahOezu+e7n+WHhuWkh+eIhueCuO+8jOivt+aCqOWBmuWlveeIhueCuOWHhuWkhyIsCiAgICAidGltZSI6ICIyMDIwLTA5LTE1IDA5OjM1OjAwIiwKICAgICJpc1JlYWQiOiBmYWxzZQogIH0sIHsKICAgICJpZCI6IDIsCiAgICAidHlwZSI6ICJzdWNjZXNzIiwKICAgICJ0aXRsZSI6ICLkuKrkurrmtojmga8iLAogICAgIm1lc3NhZ2UiOiAi5pSv5LuY5a6d5Yiw6LSm5LiA5LiH5Lq/5YWD77yB77yB77yBIiwKICAgICJ0aW1lIjogIjIwMjAtMDktMTggMTU6MjM6NDUiLAogICAgImlzUmVhZCI6IGZhbHNlCiAgfSwgewogICAgImlkIjogMywKICAgICJ0eXBlIjogImVycm9yIiwKICAgICJ0aXRsZSI6ICLmtYHnqIvmtojmga8iLAogICAgIm1lc3NhZ2UiOiAi6L+Z5Liq5rWB56iL5YeG5aSH5byA5aeL5LqG77yM5L2g5YGa5aW95YeG5aSH5LqG5Zib77yfIiwKICAgICJ0aW1lIjogIjIwMjAtMDktMTggMTc6NDU6MzMiLAogICAgImlzUmVhZCI6IGZhbHNlCiAgfSwgewogICAgImlkIjogNCwKICAgICJ0eXBlIjogImluZm8iLAogICAgInRpdGxlIjogIuS4quS6uua2iOaBryIsCiAgICAibWVzc2FnZSI6ICLor7fms6jmhI/vvIzov5nmmK/kuIDmnaHlgYfnmoTkuKrkurrmtojmga/vvIEiLAogICAgInRpbWUiOiAiMjAyMC0wOS0xOSAxOToxMToyMiIsCiAgICAiaXNSZWFkIjogdHJ1ZQogIH0sIHsKICAgICJpZCI6IDUsCiAgICAidHlwZSI6ICJzdWNjZXNzIiwKICAgICJ0aXRsZSI6ICLns7vnu5/mtojmga8iLAogICAgIm1lc3NhZ2UiOiAi6Ziz5YWJ55S35a2p5ZCR5oKo5Y+R6YCB5LqG5LiA5Liq56qX5Y+j5oqW5Yqo77yBIiwKICAgICJ0aW1lIjogIjIwMjAtMDktMjEgMTA6NTY6NDQiLAogICAgImlzUmVhZCI6IGZhbHNlCiAgfV0KfTsKCmZ1bmN0aW9uIGNvbm5lY3Qob25Db25uZWN0aW5nLCBvbkNvbm5lY3RlZCwgb25FcnJvcikgewogIC8vIOaooeaLn+ato+WcqOi/nuaOpQogIGNvbnNvbGUubG9nKHByb2Nlc3MuZW52KTsKICBvbkNvbm5lY3RpbmcgJiYgb25Db25uZWN0aW5nKCk7CiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAvLyDmqKHmi5/ov57mjqXmiJDlip8KICAgIG9uQ29ubmVjdGVkICYmIG9uQ29ubmVjdGVkKCk7CiAgfSwgMTAwMCk7CiAgb25FcnJvciAmJiBvbkVycm9yKCk7Cn0KCmZ1bmN0aW9uIHN1Yk5ld01zZyhjYikgewogIC8vIOavjyA0IOenkuS9v+eUqE1vY2vlh7rmnaXnmoTmlbDmja7lgZrkuLrlj4LmlbDosIPnlKjkuIDmrKHlm57osIPlh73mlbDmqKHmi5/mjqXmlLbliLAgV2ViU29ja2V0IOaOqOmAgeeahOa2iOaBrwogIHZhciBkYXRhID0gXy5jbG9uZURlZXAobW9ja0RhdGEuZGF0YSk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbW9ja0RhdGEuZGF0YS5sZW5ndGg7IGkrKykgewogICAgKGZ1bmN0aW9uIChpKSB7CiAgICAgIHZhciB0ZW1wRGF0YSA9IF8udGFrZShkYXRhLCBpICsgMSk7CgogICAgICB2YXIgdG90YWxOdW1iZXIgPSB0ZW1wRGF0YS5sZW5ndGg7CgogICAgICB2YXIgdW5yZWFkTnVtYmVyID0gXy5maWx0ZXIodGVtcERhdGEsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuICFkYXRhLmlzUmVhZDsKICAgICAgfSkubGVuZ3RoOwoKICAgICAgdmFyIHJlc3VsdCA9IHsKICAgICAgICB0b3RhbDogdG90YWxOdW1iZXIsCiAgICAgICAgdW5yZWFkTnVtOiB1bnJlYWROdW1iZXIsCiAgICAgICAgZGF0YTogdGVtcERhdGEKICAgICAgfTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY2IocmVzdWx0KTsKICAgICAgfSwgKGkgKyAxKSAqIDQwMDApOwogICAgfSkoaSk7CiAgfQp9CgpleHBvcnQgeyBjb25uZWN0LCBzdWJOZXdNc2cgfTs="},{"version":3,"sources":["F:/emanager/src/mock/ws-api-mock.js"],"names":["_","mockData","connect","onConnecting","onConnected","onError","console","log","process","env","setTimeout","subNewMsg","cb","data","cloneDeep","i","length","tempData","take","totalNumber","unreadNumber","filter","isRead","result","total","unreadNum"],"mappings":";;AAAA;AACA,OAAOA,CAAP,MAAc,QAAd;AACA,IAAMC,QAAQ,GAAG;AACf,aAAW,IADI;AAEf,WAAS,CAFM;AAGf,eAAa,CAHE;AAIf,UAAQ,CACN;AACE,UAAM,CADR;AAEE,YAAQ,SAFV;AAGE,aAAS,MAHX;AAIE,eAAW,mBAJb;AAKE,YAAQ,qBALV;AAME,cAAU;AANZ,GADM,EASN;AACE,UAAM,CADR;AAEE,YAAQ,SAFV;AAGE,aAAS,MAHX;AAIE,eAAW,cAJb;AAKE,YAAQ,qBALV;AAME,cAAU;AANZ,GATM,EAiBN;AACE,UAAM,CADR;AAEE,YAAQ,OAFV;AAGE,aAAS,MAHX;AAIE,eAAW,oBAJb;AAKE,YAAQ,qBALV;AAME,cAAU;AANZ,GAjBM,EAyBN;AACE,UAAM,CADR;AAEE,YAAQ,MAFV;AAGE,aAAS,MAHX;AAIE,eAAW,iBAJb;AAKE,YAAQ,qBALV;AAME,cAAU;AANZ,GAzBM,EAiCN;AACE,UAAM,CADR;AAEE,YAAQ,SAFV;AAGE,aAAS,MAHX;AAIE,eAAW,kBAJb;AAKE,YAAQ,qBALV;AAME,cAAU;AANZ,GAjCM;AAJO,CAAjB;;AAiDA,SAASC,OAAT,CAAkBC,YAAlB,EAAgCC,WAAhC,EAA6CC,OAA7C,EAAsD;AACpD;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAApB;AAEAN,EAAAA,YAAY,IAAIA,YAAY,EAA5B;AACAO,EAAAA,UAAU,CAAC,YAAM;AACf;AACAN,IAAAA,WAAW,IAAIA,WAAW,EAA1B;AACD,GAHS,EAGP,IAHO,CAAV;AAIAC,EAAAA,OAAO,IAAIA,OAAO,EAAlB;AACD;;AAED,SAASM,SAAT,CAAoBC,EAApB,EAAwB;AACtB;AACA,MAAMC,IAAI,GAAGb,CAAC,CAACc,SAAF,CAAYb,QAAQ,CAACY,IAArB,CAAb;;AACA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,QAAQ,CAACY,IAAT,CAAcG,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,KAAC,UAAUA,CAAV,EAAa;AACZ,UAAME,QAAQ,GAAGjB,CAAC,CAACkB,IAAF,CAAOL,IAAP,EAAaE,CAAC,GAAG,CAAjB,CAAjB;;AACA,UAAMI,WAAW,GAAGF,QAAQ,CAACD,MAA7B;;AACA,UAAMI,YAAY,GAAGpB,CAAC,CAACqB,MAAF,CAASJ,QAAT,EAAmB,UAAAJ,IAAI,EAAI;AAC9C,eAAO,CAACA,IAAI,CAACS,MAAb;AACD,OAFoB,EAElBN,MAFH;;AAGA,UAAMO,MAAM,GAAG;AACbC,QAAAA,KAAK,EAAEL,WADM;AAEbM,QAAAA,SAAS,EAAEL,YAFE;AAGbP,QAAAA,IAAI,EAAEI;AAHO,OAAf;AAKAP,MAAAA,UAAU,CAAC,YAAM;AACfE,QAAAA,EAAE,CAACW,MAAD,CAAF;AACD,OAFS,EAEP,CAACR,CAAC,GAAG,CAAL,IAAU,IAFH,CAAV;AAID,KAfD,EAeGA,CAfH;AAiBD;AACF;;AAED,SACEb,OADF,EAEES,SAFF","sourcesContent":["// websocket api 打桩\r\nimport _ from 'lodash'\r\nconst mockData = {\r\n  \"success\": true,\r\n  \"total\": 5,\r\n  \"unreadNum\": 4,\r\n  \"data\": [\r\n    {\r\n      \"id\": 1,\r\n      \"type\": \"warning\",\r\n      \"title\": \"系统消息\",\r\n      \"message\": \"您的系统准备爆炸，请您做好爆炸准备\",\r\n      \"time\": \"2020-09-15 09:35:00\",\r\n      \"isRead\": false\r\n    },\r\n    {\r\n      \"id\": 2,\r\n      \"type\": \"success\",\r\n      \"title\": \"个人消息\",\r\n      \"message\": \"支付宝到账一万亿元！！！\",\r\n      \"time\": \"2020-09-18 15:23:45\",\r\n      \"isRead\": false\r\n    },\r\n    {\r\n      \"id\": 3,\r\n      \"type\": \"error\",\r\n      \"title\": \"流程消息\",\r\n      \"message\": \"这个流程准备开始了，你做好准备了嘛？\",\r\n      \"time\": \"2020-09-18 17:45:33\",\r\n      \"isRead\": false\r\n    },\r\n    {\r\n      \"id\": 4,\r\n      \"type\": \"info\",\r\n      \"title\": \"个人消息\",\r\n      \"message\": \"请注意，这是一条假的个人消息！\",\r\n      \"time\": \"2020-09-19 19:11:22\",\r\n      \"isRead\": true\r\n    },\r\n    {\r\n      \"id\": 5,\r\n      \"type\": \"success\",\r\n      \"title\": \"系统消息\",\r\n      \"message\": \"阳光男孩向您发送了一个窗口抖动！\",\r\n      \"time\": \"2020-09-21 10:56:44\",\r\n      \"isRead\": false\r\n    }\r\n  ]\r\n}\r\n\r\n\r\nfunction connect (onConnecting, onConnected, onError) {\r\n  // 模拟正在连接\r\n  console.log(process.env)\r\n\r\n  onConnecting && onConnecting();\r\n  setTimeout(() => {\r\n    // 模拟连接成功\r\n    onConnected && onConnected();\r\n  }, 1000)\r\n  onError && onError();\r\n}\r\n\r\nfunction subNewMsg (cb) {\r\n  // 每 4 秒使用Mock出来的数据做为参数调用一次回调函数模拟接收到 WebSocket 推送的消息\r\n  const data = _.cloneDeep(mockData.data);\r\n  for (let i = 0; i < mockData.data.length; i++) {\r\n    (function (i) {\r\n      const tempData = _.take(data, i + 1);\r\n      const totalNumber = tempData.length;\r\n      const unreadNumber = _.filter(tempData, data => {\r\n        return !data.isRead\r\n      }).length;\r\n      const result = {\r\n        total: totalNumber,\r\n        unreadNum: unreadNumber,\r\n        data: tempData\r\n      }\r\n      setTimeout(() => {\r\n        cb(result);\r\n      }, (i + 1) * 4000);\r\n\r\n    })(i)\r\n\r\n  }\r\n}\r\n\r\nexport {\r\n  connect,\r\n  subNewMsg\r\n}\r\n"]}]}