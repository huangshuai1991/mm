{"remainingRequest":"F:\\emanager\\node_modules\\babel-loader\\lib\\index.js!F:\\emanager\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\emanager\\src\\plugins\\stomp.js","dependencies":[{"path":"F:\\emanager\\src\\plugins\\stomp.js","mtime":1604888126519},{"path":"F:\\emanager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\emanager\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\emanager\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmV2ZXJzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS5ub3ciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1hcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzIjsKLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMQoKLyoKICAgU3RvbXAgT3ZlciBXZWJTb2NrZXQgaHR0cDovL3d3dy5qbWVzbmlsLm5ldC9zdG9tcC13ZWJzb2NrZXQvZG9jLyB8IEFwYWNoZSBMaWNlbnNlIFYyLjAKCiAgIENvcHlyaWdodCAoQykgMjAxMC0yMDEzIFtKZWZmIE1lc25pbF0oaHR0cDovL2ptZXNuaWwubmV0LykKICAgQ29weXJpZ2h0IChDKSAyMDEyIFtGdXNlU291cmNlLCBJbmMuXShodHRwOi8vZnVzZXNvdXJjZS5jb20pCiAqLwp2YXIgU3RvbXA7CihmdW5jdGlvbiAoKSB7CiAgdmFyIEJ5dGUsCiAgICAgIENsaWVudCwKICAgICAgRnJhbWUsCiAgICAgIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogICAgICBfX3NsaWNlID0gW10uc2xpY2U7CiAgQnl0ZSA9IHsKICAgIExGOiAnXHgwQScsCiAgICBOVUxMOiAnXHgwMCcKICB9OwoKICBGcmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB1bm1hcnNoYWxsU2luZ2xlOwoKICAgIGZ1bmN0aW9uIEZyYW1lKGNvbW1hbmQsIGhlYWRlcnMsIGJvZHkpIHsKICAgICAgdGhpcy5jb21tYW5kID0gY29tbWFuZDsKICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycyAhPSBudWxsID8gaGVhZGVycyA6IHt9OwogICAgICB0aGlzLmJvZHkgPSBib2R5ICE9IG51bGwgPyBib2R5IDogJyc7CiAgICB9CgogICAgRnJhbWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgbGluZXMsIG5hbWUsIHNraXBDb250ZW50TGVuZ3RoLCB2YWx1ZSwgX3JlZjsKCiAgICAgIGxpbmVzID0gW3RoaXMuY29tbWFuZF07CiAgICAgIHNraXBDb250ZW50TGVuZ3RoID0gdGhpcy5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddID09PSBmYWxzZSA/IHRydWUgOiBmYWxzZTsKCiAgICAgIGlmIChza2lwQ29udGVudExlbmd0aCkgewogICAgICAgIGRlbGV0ZSB0aGlzLmhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ107CiAgICAgIH0KCiAgICAgIF9yZWYgPSB0aGlzLmhlYWRlcnM7CgogICAgICBmb3IgKG5hbWUgaW4gX3JlZikgewogICAgICAgIGlmICghX19oYXNQcm9wLmNhbGwoX3JlZiwgbmFtZSkpIGNvbnRpbnVlOwogICAgICAgIHZhbHVlID0gX3JlZltuYW1lXTsKICAgICAgICBsaW5lcy5wdXNoKCIiICsgbmFtZSArICI6IiArIHZhbHVlKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYm9keSAmJiAhc2tpcENvbnRlbnRMZW5ndGgpIHsKICAgICAgICBsaW5lcy5wdXNoKCJjb250ZW50LWxlbmd0aDoiICsgRnJhbWUuc2l6ZU9mVVRGOCh0aGlzLmJvZHkpKTsKICAgICAgfQoKICAgICAgbGluZXMucHVzaChCeXRlLkxGICsgdGhpcy5ib2R5KTsKICAgICAgcmV0dXJuIGxpbmVzLmpvaW4oQnl0ZS5MRik7CiAgICB9OwoKICAgIEZyYW1lLnNpemVPZlVURjggPSBmdW5jdGlvbiAocykgewogICAgICBpZiAocykgewogICAgICAgIHJldHVybiBlbmNvZGVVUkkocykubWF0Y2goLyUuLnwuL2cpLmxlbmd0aDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgfTsKCiAgICB1bm1hcnNoYWxsU2luZ2xlID0gZnVuY3Rpb24gdW5tYXJzaGFsbFNpbmdsZShkYXRhKSB7CiAgICAgIHZhciBib2R5LCBjaHIsIGNvbW1hbmQsIGRpdmlkZXIsIGhlYWRlckxpbmVzLCBoZWFkZXJzLCBpLCBpZHgsIGxlbiwgbGluZSwgc3RhcnQsIHRyaW0sIF9pLCBfaiwgX2xlbiwgX3JlZiwgX3JlZjE7CgogICAgICBkaXZpZGVyID0gZGF0YS5zZWFyY2goUmVnRXhwKCIiICsgQnl0ZS5MRiArIEJ5dGUuTEYpKTsKICAgICAgaGVhZGVyTGluZXMgPSBkYXRhLnN1YnN0cmluZygwLCBkaXZpZGVyKS5zcGxpdChCeXRlLkxGKTsKICAgICAgY29tbWFuZCA9IGhlYWRlckxpbmVzLnNoaWZ0KCk7CiAgICAgIGhlYWRlcnMgPSB7fTsKCiAgICAgIHRyaW0gPSBmdW5jdGlvbiB0cmltKHN0cikgewogICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXlxzK3xccyskL2csICcnKTsKICAgICAgfTsKCiAgICAgIF9yZWYgPSBoZWFkZXJMaW5lcy5yZXZlcnNlKCk7CgogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBsaW5lID0gX3JlZltfaV07CiAgICAgICAgaWR4ID0gbGluZS5pbmRleE9mKCc6Jyk7CiAgICAgICAgaGVhZGVyc1t0cmltKGxpbmUuc3Vic3RyaW5nKDAsIGlkeCkpXSA9IHRyaW0obGluZS5zdWJzdHJpbmcoaWR4ICsgMSkpOwogICAgICB9CgogICAgICBib2R5ID0gJyc7CiAgICAgIHN0YXJ0ID0gZGl2aWRlciArIDI7CgogICAgICBpZiAoaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSkgewogICAgICAgIGxlbiA9IHBhcnNlSW50KGhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10pOwogICAgICAgIGJvZHkgPSAoJycgKyBkYXRhKS5zdWJzdHJpbmcoc3RhcnQsIHN0YXJ0ICsgbGVuKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaHIgPSBudWxsOwoKICAgICAgICBmb3IgKGkgPSBfaiA9IHN0YXJ0LCBfcmVmMSA9IGRhdGEubGVuZ3RoOyBzdGFydCA8PSBfcmVmMSA/IF9qIDwgX3JlZjEgOiBfaiA+IF9yZWYxOyBpID0gc3RhcnQgPD0gX3JlZjEgPyArK19qIDogLS1faikgewogICAgICAgICAgY2hyID0gZGF0YS5jaGFyQXQoaSk7CgogICAgICAgICAgaWYgKGNociA9PT0gQnl0ZS5OVUxMKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGJvZHkgKz0gY2hyOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBGcmFtZShjb21tYW5kLCBoZWFkZXJzLCBib2R5KTsKICAgIH07CgogICAgRnJhbWUudW5tYXJzaGFsbCA9IGZ1bmN0aW9uIChkYXRhcykgewogICAgICB2YXIgZGF0YTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwoKICAgICAgICBfcmVmID0gZGF0YXMuc3BsaXQoUmVnRXhwKCIiICsgQnl0ZS5OVUxMICsgQnl0ZS5MRiArICIqIikpOwogICAgICAgIF9yZXN1bHRzID0gW107CgogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgZGF0YSA9IF9yZWZbX2ldOwoKICAgICAgICAgIGlmICgoZGF0YSAhPSBudWxsID8gZGF0YS5sZW5ndGggOiB2b2lkIDApID4gMCkgewogICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHVubWFyc2hhbGxTaW5nbGUoZGF0YSkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgICB9KCk7CiAgICB9OwoKICAgIEZyYW1lLm1hcnNoYWxsID0gZnVuY3Rpb24gKGNvbW1hbmQsIGhlYWRlcnMsIGJvZHkpIHsKICAgICAgdmFyIGZyYW1lOwogICAgICBmcmFtZSA9IG5ldyBGcmFtZShjb21tYW5kLCBoZWFkZXJzLCBib2R5KTsKICAgICAgcmV0dXJuIGZyYW1lLnRvU3RyaW5nKCkgKyBCeXRlLk5VTEw7CiAgICB9OwoKICAgIHJldHVybiBGcmFtZTsKICB9KCk7CgogIENsaWVudCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBub3c7CgogICAgZnVuY3Rpb24gQ2xpZW50KHdzKSB7CiAgICAgIHRoaXMud3MgPSB3czsKICAgICAgdGhpcy53cy5iaW5hcnlUeXBlID0gImFycmF5YnVmZmVyIjsKICAgICAgdGhpcy5jb3VudGVyID0gMDsKICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5oZWFydGJlYXQgPSB7CiAgICAgICAgb3V0Z29pbmc6IDEwMDAwLAogICAgICAgIGluY29taW5nOiAxMDAwMAogICAgICB9OwogICAgICB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSA9IDE2ICogMTAyNDsKICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0ge307CiAgICB9CgogICAgQ2xpZW50LnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgIHZhciBfcmVmOwoKICAgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiICYmIHdpbmRvdyAhPT0gbnVsbCA/IChfcmVmID0gd2luZG93LmNvbnNvbGUpICE9IG51bGwgPyBfcmVmLmxvZyhtZXNzYWdlKSA6IHZvaWQgMCA6IHZvaWQgMDsKICAgIH07CgogICAgbm93ID0gZnVuY3Rpb24gbm93KCkgewogICAgICBpZiAoRGF0ZS5ub3cpIHsKICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoKS52YWx1ZU9mOwogICAgICB9CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUuX3RyYW5zbWl0ID0gZnVuY3Rpb24gKGNvbW1hbmQsIGhlYWRlcnMsIGJvZHkpIHsKICAgICAgdmFyIG91dDsKICAgICAgb3V0ID0gRnJhbWUubWFyc2hhbGwoY29tbWFuZCwgaGVhZGVycywgYm9keSk7CgogICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICB0aGlzLmRlYnVnKCI+Pj4gIiArIG91dCk7CiAgICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvbgoKCiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgaWYgKG91dC5sZW5ndGggPiB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSkgewogICAgICAgICAgdGhpcy53cy5zZW5kKG91dC5zdWJzdHJpbmcoMCwgdGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpKTsKICAgICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcodGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpOwoKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICB0aGlzLmRlYnVnKCJyZW1haW5pbmcgPSAiICsgb3V0Lmxlbmd0aCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0aGlzLndzLnNlbmQob3V0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5fc2V0dXBIZWFydGJlYXQgPSBmdW5jdGlvbiAoaGVhZGVycykgewogICAgICB2YXIgc2VydmVySW5jb21pbmcsIHNlcnZlck91dGdvaW5nLCB0dGwsIHYsIF9yZWYsIF9yZWYxOwoKICAgICAgaWYgKChfcmVmID0gaGVhZGVycy52ZXJzaW9uKSAhPT0gU3RvbXAuVkVSU0lPTlMuVjFfMSAmJiBfcmVmICE9PSBTdG9tcC5WRVJTSU9OUy5WMV8yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfcmVmMSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYxLCBfcmVzdWx0czsKCiAgICAgICAgX3JlZjEgPSBoZWFkZXJzWydoZWFydC1iZWF0J10uc3BsaXQoIiwiKTsKICAgICAgICBfcmVzdWx0cyA9IFtdOwoKICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgICB2ID0gX3JlZjFbX2ldOwoKICAgICAgICAgIF9yZXN1bHRzLnB1c2gocGFyc2VJbnQodikpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgICB9KCksIHNlcnZlck91dGdvaW5nID0gX3JlZjFbMF0sIHNlcnZlckluY29taW5nID0gX3JlZjFbMV07CgogICAgICBpZiAoISh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZyA9PT0gMCB8fCBzZXJ2ZXJJbmNvbWluZyA9PT0gMCkpIHsKICAgICAgICB0dGwgPSBNYXRoLm1heCh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZywgc2VydmVySW5jb21pbmcpOwoKICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRoaXMuZGVidWcoInNlbmQgUElORyBldmVyeSAiICsgdHRsICsgIm1zIik7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBpbmdlciA9IFN0b21wLnNldEludGVydmFsKHR0bCwgZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy53cy5zZW5kKEJ5dGUuTEYpOwoKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IF90aGlzLmRlYnVnKCI+Pj4gUElORyIpIDogdm9pZCAwOwogICAgICAgICAgfTsKICAgICAgICB9KHRoaXMpKTsKICAgICAgfQoKICAgICAgaWYgKCEodGhpcy5oZWFydGJlYXQuaW5jb21pbmcgPT09IDAgfHwgc2VydmVyT3V0Z29pbmcgPT09IDApKSB7CiAgICAgICAgdHRsID0gTWF0aC5tYXgodGhpcy5oZWFydGJlYXQuaW5jb21pbmcsIHNlcnZlck91dGdvaW5nKTsKCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICB0aGlzLmRlYnVnKCJjaGVjayBQT05HIGV2ZXJ5ICIgKyB0dGwgKyAibXMiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLnBvbmdlciA9IFN0b21wLnNldEludGVydmFsKHR0bCwgZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZGVsdGE7CiAgICAgICAgICAgIGRlbHRhID0gbm93KCkgLSBfdGhpcy5zZXJ2ZXJBY3Rpdml0eTsKCiAgICAgICAgICAgIGlmIChkZWx0YSA+IHR0bCAqIDIpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygiZGlkIG5vdCByZWNlaXZlIHNlcnZlciBhY3Rpdml0eSBmb3IgdGhlIGxhc3QgIiArIGRlbHRhICsgIm1zIik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMud3MuY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9KHRoaXMpKTsKICAgICAgfQogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLl9wYXJzZUNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcmdzLCBjb25uZWN0Q2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGhlYWRlcnM7CiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdOwogICAgICBoZWFkZXJzID0ge307CgogICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgaGVhZGVycyA9IGFyZ3NbMF0sIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMV07CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgaWYgKGFyZ3NbMV0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICBoZWFkZXJzID0gYXJnc1swXSwgY29ubmVjdENhbGxiYWNrID0gYXJnc1sxXSwgZXJyb3JDYWxsYmFjayA9IGFyZ3NbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoZWFkZXJzLmxvZ2luID0gYXJnc1swXSwgaGVhZGVycy5wYXNzY29kZSA9IGFyZ3NbMV0sIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMl07CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIGhlYWRlcnMubG9naW4gPSBhcmdzWzBdLCBoZWFkZXJzLnBhc3Njb2RlID0gYXJnc1sxXSwgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXSwgZXJyb3JDYWxsYmFjayA9IGFyZ3NbM107CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGhlYWRlcnMubG9naW4gPSBhcmdzWzBdLCBoZWFkZXJzLnBhc3Njb2RlID0gYXJnc1sxXSwgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXSwgZXJyb3JDYWxsYmFjayA9IGFyZ3NbM10sIGhlYWRlcnMuaG9zdCA9IGFyZ3NbNF07CiAgICAgIH0KCiAgICAgIHJldHVybiBbaGVhZGVycywgY29ubmVjdENhbGxiYWNrLCBlcnJvckNhbGxiYWNrXTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYXJncywgZXJyb3JDYWxsYmFjaywgaGVhZGVycywgb3V0OwogICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTsKICAgICAgb3V0ID0gdGhpcy5fcGFyc2VDb25uZWN0LmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICBoZWFkZXJzID0gb3V0WzBdLCB0aGlzLmNvbm5lY3RDYWxsYmFjayA9IG91dFsxXSwgZXJyb3JDYWxsYmFjayA9IG91dFsyXTsKCiAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHRoaXMuZGVidWcoIk9wZW5pbmcgV2ViIFNvY2tldC4uLiIpOwogICAgICB9CgogICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChfdGhpcykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICB2YXIgYXJyLCBjLCBjbGllbnQsIGRhdGEsIGZyYW1lLCBtZXNzYWdlSUQsIG9ucmVjZWl2ZSwgc3Vic2NyaXB0aW9uLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CgogICAgICAgICAgZGF0YSA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgZXZ0LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IChhcnIgPSBuZXcgVWludDhBcnJheShldnQuZGF0YSksIHR5cGVvZiBfdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IF90aGlzLmRlYnVnKCItLS0gZ290IGRhdGEgbGVuZ3RoOiAiICsgYXJyLmxlbmd0aCkgOiB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVzdWx0czsKCiAgICAgICAgICAgIF9yZXN1bHRzID0gW107CgogICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFyci5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgICAgIGMgPSBhcnJbX2ldOwoKICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICAgICAgICB9KCkuam9pbignJykpIDogZXZ0LmRhdGE7CiAgICAgICAgICBfdGhpcy5zZXJ2ZXJBY3Rpdml0eSA9IG5vdygpOwoKICAgICAgICAgIGlmIChkYXRhID09PSBCeXRlLkxGKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygiPDw8IFBPTkciKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgX3RoaXMuZGVidWcoIjw8PCAiICsgZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3JlZiA9IEZyYW1lLnVubWFyc2hhbGwoZGF0YSk7CiAgICAgICAgICBfcmVzdWx0cyA9IFtdOwoKICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgICBmcmFtZSA9IF9yZWZbX2ldOwoKICAgICAgICAgICAgc3dpdGNoIChmcmFtZS5jb21tYW5kKSB7CiAgICAgICAgICAgICAgY2FzZSAiQ09OTkVDVEVEIjoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoImNvbm5lY3RlZCB0byBzZXJ2ZXIgIiArIGZyYW1lLmhlYWRlcnMuc2VydmVyKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0ZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgIF90aGlzLl9zZXR1cEhlYXJ0YmVhdChmcmFtZS5oZWFkZXJzKTsKCiAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHR5cGVvZiBfdGhpcy5jb25uZWN0Q2FsbGJhY2sgPT09ICJmdW5jdGlvbiIgPyBfdGhpcy5jb25uZWN0Q2FsbGJhY2soZnJhbWUpIDogdm9pZCAwKTsKCiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiTUVTU0FHRSI6CiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBmcmFtZS5oZWFkZXJzLnN1YnNjcmlwdGlvbjsKICAgICAgICAgICAgICAgIG9ucmVjZWl2ZSA9IF90aGlzLnN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uXSB8fCBfdGhpcy5vbnJlY2VpdmU7CgogICAgICAgICAgICAgICAgaWYgKG9ucmVjZWl2ZSkgewogICAgICAgICAgICAgICAgICBjbGllbnQgPSBfdGhpczsKICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEID0gZnJhbWUuaGVhZGVyc1sibWVzc2FnZS1pZCJdOwoKICAgICAgICAgICAgICAgICAgZnJhbWUuYWNrID0gZnVuY3Rpb24gKGhlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVycyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0ge307CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LmFjayhtZXNzYWdlSUQsIHN1YnNjcmlwdGlvbiwgaGVhZGVycyk7CiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICBmcmFtZS5uYWNrID0gZnVuY3Rpb24gKGhlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVycyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0ge307CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50Lm5hY2sobWVzc2FnZUlELCBzdWJzY3JpcHRpb24sIGhlYWRlcnMpOwogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChvbnJlY2VpdmUoZnJhbWUpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2godHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iID8gX3RoaXMuZGVidWcoIlVuaGFuZGxlZCByZWNlaXZlZCBNRVNTQUdFOiAiICsgZnJhbWUpIDogdm9pZCAwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiUkVDRUlQVCI6CiAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHR5cGVvZiBfdGhpcy5vbnJlY2VpcHQgPT09ICJmdW5jdGlvbiIgPyBfdGhpcy5vbnJlY2VpcHQoZnJhbWUpIDogdm9pZCAwKTsKCiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiRVJST1IiOgogICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCh0eXBlb2YgZXJyb3JDYWxsYmFjayA9PT0gImZ1bmN0aW9uIiA/IGVycm9yQ2FsbGJhY2soZnJhbWUpIDogdm9pZCAwKTsKCiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2godHlwZW9mIF90aGlzLmRlYnVnID09PSAiZnVuY3Rpb24iID8gX3RoaXMuZGVidWcoIlVuaGFuZGxlZCBmcmFtZTogIiArIGZyYW1lKSA6IHZvaWQgMCk7CgogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgICAgIH07CiAgICAgIH0odGhpcyk7CgogICAgICB0aGlzLndzLm9uY2xvc2UgPSBmdW5jdGlvbiAoX3RoaXMpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIG1zZzsKICAgICAgICAgIG1zZyA9ICJXaG9vcHMhIExvc3QgY29ubmVjdGlvbiB0byAiICsgX3RoaXMud3MudXJsOwoKICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgX3RoaXMuZGVidWcobXNnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5fY2xlYW5VcCgpOwoKICAgICAgICAgIHJldHVybiB0eXBlb2YgZXJyb3JDYWxsYmFjayA9PT0gImZ1bmN0aW9uIiA/IGVycm9yQ2FsbGJhY2sobXNnKSA6IHZvaWQgMDsKICAgICAgICB9OwogICAgICB9KHRoaXMpOwoKICAgICAgcmV0dXJuIHRoaXMud3Mub25vcGVuID0gZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgX3RoaXMuZGVidWcoJ1dlYiBTb2NrZXQgT3BlbmVkLi4uJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaGVhZGVyc1siYWNjZXB0LXZlcnNpb24iXSA9IFN0b21wLlZFUlNJT05TLnN1cHBvcnRlZFZlcnNpb25zKCk7CiAgICAgICAgICBoZWFkZXJzWyJoZWFydC1iZWF0Il0gPSBbX3RoaXMuaGVhcnRiZWF0Lm91dGdvaW5nLCBfdGhpcy5oZWFydGJlYXQuaW5jb21pbmddLmpvaW4oJywnKTsKICAgICAgICAgIHJldHVybiBfdGhpcy5fdHJhbnNtaXQoIkNPTk5FQ1QiLCBoZWFkZXJzKTsKICAgICAgICB9OwogICAgICB9KHRoaXMpOwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoZGlzY29ubmVjdENhbGxiYWNrLCBoZWFkZXJzKSB7CiAgICAgIGlmIChoZWFkZXJzID09IG51bGwpIHsKICAgICAgICBoZWFkZXJzID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMuX3RyYW5zbWl0KCJESVNDT05ORUNUIiwgaGVhZGVycyk7CgogICAgICB0aGlzLndzLm9uY2xvc2UgPSBudWxsOwogICAgICB0aGlzLndzLmNsb3NlKCk7CgogICAgICB0aGlzLl9jbGVhblVwKCk7CgogICAgICByZXR1cm4gdHlwZW9mIGRpc2Nvbm5lY3RDYWxsYmFjayA9PT0gImZ1bmN0aW9uIiA/IGRpc2Nvbm5lY3RDYWxsYmFjaygpIDogdm9pZCAwOwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLl9jbGVhblVwID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMucGluZ2VyKSB7CiAgICAgICAgU3RvbXAuY2xlYXJJbnRlcnZhbCh0aGlzLnBpbmdlcik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnBvbmdlcikgewogICAgICAgIHJldHVybiBTdG9tcC5jbGVhckludGVydmFsKHRoaXMucG9uZ2VyKTsKICAgICAgfQogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoZGVzdGluYXRpb24sIGhlYWRlcnMsIGJvZHkpIHsKICAgICAgaWYgKGhlYWRlcnMgPT0gbnVsbCkgewogICAgICAgIGhlYWRlcnMgPSB7fTsKICAgICAgfQoKICAgICAgaWYgKGJvZHkgPT0gbnVsbCkgewogICAgICAgIGJvZHkgPSAnJzsKICAgICAgfQoKICAgICAgaGVhZGVycy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uOwogICAgICByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIlNFTkQiLCBoZWFkZXJzLCBib2R5KTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZGVzdGluYXRpb24sIGNhbGxiYWNrLCBoZWFkZXJzKSB7CiAgICAgIHZhciBjbGllbnQ7CgogICAgICBpZiAoaGVhZGVycyA9PSBudWxsKSB7CiAgICAgICAgaGVhZGVycyA9IHt9OwogICAgICB9CgogICAgICBpZiAoIWhlYWRlcnMuaWQpIHsKICAgICAgICBoZWFkZXJzLmlkID0gInN1Yi0iICsgdGhpcy5jb3VudGVyKys7CiAgICAgIH0KCiAgICAgIGhlYWRlcnMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjsKICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2hlYWRlcnMuaWRdID0gY2FsbGJhY2s7CgogICAgICB0aGlzLl90cmFuc21pdCgiU1VCU0NSSUJFIiwgaGVhZGVycyk7CgogICAgICBjbGllbnQgPSB0aGlzOwogICAgICByZXR1cm4gewogICAgICAgIGlkOiBoZWFkZXJzLmlkLAogICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHsKICAgICAgICAgIHJldHVybiBjbGllbnQudW5zdWJzY3JpYmUoaGVhZGVycy5pZCk7CiAgICAgICAgfQogICAgICB9OwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbnNbaWRdOwogICAgICByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIlVOU1VCU0NSSUJFIiwgewogICAgICAgIGlkOiBpZAogICAgICB9KTsKICAgIH07CgogICAgQ2xpZW50LnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikgewogICAgICB2YXIgY2xpZW50LCB0eGlkOwogICAgICB0eGlkID0gdHJhbnNhY3Rpb24gfHwgInR4LSIgKyB0aGlzLmNvdW50ZXIrKzsKCiAgICAgIHRoaXMuX3RyYW5zbWl0KCJCRUdJTiIsIHsKICAgICAgICB0cmFuc2FjdGlvbjogdHhpZAogICAgICB9KTsKCiAgICAgIGNsaWVudCA9IHRoaXM7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHR4aWQsCiAgICAgICAgY29tbWl0OiBmdW5jdGlvbiBjb21taXQoKSB7CiAgICAgICAgICByZXR1cm4gY2xpZW50LmNvbW1pdCh0eGlkKTsKICAgICAgICB9LAogICAgICAgIGFib3J0OiBmdW5jdGlvbiBhYm9ydCgpIHsKICAgICAgICAgIHJldHVybiBjbGllbnQuYWJvcnQodHhpZCk7CiAgICAgICAgfQogICAgICB9OwogICAgfTsKCiAgICBDbGllbnQucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikgewogICAgICByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIkNPTU1JVCIsIHsKICAgICAgICB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb24KICAgICAgfSk7CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHsKICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJBQk9SVCIsIHsKICAgICAgICB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb24KICAgICAgfSk7CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUuYWNrID0gZnVuY3Rpb24gKG1lc3NhZ2VJRCwgc3Vic2NyaXB0aW9uLCBoZWFkZXJzKSB7CiAgICAgIGlmIChoZWFkZXJzID09IG51bGwpIHsKICAgICAgICBoZWFkZXJzID0ge307CiAgICAgIH0KCiAgICAgIGhlYWRlcnNbIm1lc3NhZ2UtaWQiXSA9IG1lc3NhZ2VJRDsKICAgICAgaGVhZGVycy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb247CiAgICAgIHJldHVybiB0aGlzLl90cmFuc21pdCgiQUNLIiwgaGVhZGVycyk7CiAgICB9OwoKICAgIENsaWVudC5wcm90b3R5cGUubmFjayA9IGZ1bmN0aW9uIChtZXNzYWdlSUQsIHN1YnNjcmlwdGlvbiwgaGVhZGVycykgewogICAgICBpZiAoaGVhZGVycyA9PSBudWxsKSB7CiAgICAgICAgaGVhZGVycyA9IHt9OwogICAgICB9CgogICAgICBoZWFkZXJzWyJtZXNzYWdlLWlkIl0gPSBtZXNzYWdlSUQ7CiAgICAgIGhlYWRlcnMuc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uOwogICAgICByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIk5BQ0siLCBoZWFkZXJzKTsKICAgIH07CgogICAgcmV0dXJuIENsaWVudDsKICB9KCk7CgogIFN0b21wID0gewogICAgVkVSU0lPTlM6IHsKICAgICAgVjFfMDogJzEuMCcsCiAgICAgIFYxXzE6ICcxLjEnLAogICAgICBWMV8yOiAnMS4yJywKICAgICAgc3VwcG9ydGVkVmVyc2lvbnM6IGZ1bmN0aW9uIHN1cHBvcnRlZFZlcnNpb25zKCkgewogICAgICAgIHJldHVybiAnMS4xLDEuMCc7CiAgICAgIH0KICAgIH0sCiAgICBjbGllbnQ6IGZ1bmN0aW9uIGNsaWVudCh1cmwsIHByb3RvY29scykgewogICAgICB2YXIga2xhc3MsIHdzOwoKICAgICAgaWYgKHByb3RvY29scyA9PSBudWxsKSB7CiAgICAgICAgcHJvdG9jb2xzID0gWyd2MTAuc3RvbXAnLCAndjExLnN0b21wJ107CiAgICAgIH0KCiAgICAgIGtsYXNzID0gU3RvbXAuV2ViU29ja2V0Q2xhc3MgfHwgV2ViU29ja2V0OwogICAgICB3cyA9IG5ldyBrbGFzcyh1cmwsIHByb3RvY29scyk7CiAgICAgIHJldHVybiBuZXcgQ2xpZW50KHdzKTsKICAgIH0sCiAgICBvdmVyOiBmdW5jdGlvbiBvdmVyKHdzKSB7CiAgICAgIHJldHVybiBuZXcgQ2xpZW50KHdzKTsKICAgIH0sCiAgICBGcmFtZTogRnJhbWUKICB9OwoKICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICJ1bmRlZmluZWQiICYmIGV4cG9ydHMgIT09IG51bGwpIHsKICAgIGV4cG9ydHMuU3RvbXAgPSBTdG9tcDsKICB9CgogIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiAmJiB3aW5kb3cgIT09IG51bGwpIHsKICAgIFN0b21wLnNldEludGVydmFsID0gZnVuY3Rpb24gKGludGVydmFsLCBmKSB7CiAgICAgIHJldHVybiB3aW5kb3cuc2V0SW50ZXJ2YWwoZiwgaW50ZXJ2YWwpOwogICAgfTsKCiAgICBTdG9tcC5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgIHJldHVybiB3aW5kb3cuY2xlYXJJbnRlcnZhbChpZCk7CiAgICB9OwoKICAgIHdpbmRvdy5TdG9tcCA9IFN0b21wOwogIH0gZWxzZSBpZiAoIWV4cG9ydHMpIHsKICAgIHNlbGYuU3RvbXAgPSBTdG9tcDsKICB9Cn0pLmNhbGwodGhpcyk7CmV4cG9ydCBkZWZhdWx0IFN0b21wOw=="},{"version":3,"sources":["F:/emanager/src/plugins/stomp.js"],"names":["Stomp","Byte","Client","Frame","__hasProp","hasOwnProperty","__slice","slice","LF","NULL","unmarshallSingle","command","headers","body","prototype","toString","lines","name","skipContentLength","value","_ref","call","push","sizeOfUTF8","join","s","encodeURI","match","length","data","chr","divider","headerLines","i","idx","len","line","start","trim","_i","_j","_len","_ref1","search","RegExp","substring","split","shift","str","replace","reverse","indexOf","parseInt","charAt","unmarshall","datas","_results","marshall","frame","now","ws","binaryType","counter","connected","heartbeat","outgoing","incoming","maxWebSocketFrameSize","subscriptions","debug","message","window","console","log","Date","valueOf","_transmit","out","send","_setupHeartbeat","serverIncoming","serverOutgoing","ttl","v","version","VERSIONS","V1_1","V1_2","Math","max","pinger","setInterval","_this","ponger","delta","serverActivity","close","_parseConnect","args","connectCallback","errorCallback","arguments","Function","login","passcode","host","connect","apply","onmessage","evt","arr","c","client","messageID","onreceive","subscription","ArrayBuffer","Uint8Array","String","fromCharCode","server","ack","nack","onreceipt","onclose","msg","url","_cleanUp","onopen","supportedVersions","disconnect","disconnectCallback","clearInterval","destination","subscribe","callback","id","unsubscribe","begin","transaction","txid","commit","abort","V1_0","protocols","klass","WebSocketClass","WebSocket","over","exports","interval","f","self"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.7.1\n\n/*\n   Stomp Over WebSocket http://www.jmesnil.net/stomp-websocket/doc/ | Apache License V2.0\n\n   Copyright (C) 2010-2013 [Jeff Mesnil](http://jmesnil.net/)\n   Copyright (C) 2012 [FuseSource, Inc.](http://fusesource.com)\n */\nlet Stomp;\n(function () {\n  var Byte, Client, Frame,\n    __hasProp = {}.hasOwnProperty,\n    __slice = [].slice;\n\n  Byte = {\n    LF: '\\x0A',\n    NULL: '\\x00'\n  };\n\n  Frame = (function () {\n    var unmarshallSingle;\n\n    function Frame (command, headers, body) {\n      this.command = command;\n      this.headers = headers != null ? headers : {};\n      this.body = body != null ? body : '';\n    }\n\n    Frame.prototype.toString = function () {\n      var lines, name, skipContentLength, value, _ref;\n      lines = [this.command];\n      skipContentLength = this.headers['content-length'] === false ? true : false;\n      if (skipContentLength) {\n        delete this.headers['content-length'];\n      }\n      _ref = this.headers;\n      for (name in _ref) {\n        if (!__hasProp.call(_ref, name)) continue;\n        value = _ref[name];\n        lines.push(\"\" + name + \":\" + value);\n      }\n      if (this.body && !skipContentLength) {\n        lines.push(\"content-length:\" + (Frame.sizeOfUTF8(this.body)));\n      }\n      lines.push(Byte.LF + this.body);\n      return lines.join(Byte.LF);\n    };\n\n    Frame.sizeOfUTF8 = function (s) {\n      if (s) {\n        return encodeURI(s).match(/%..|./g).length;\n      } else {\n        return 0;\n      }\n    };\n\n    unmarshallSingle = function (data) {\n      var body, chr, command, divider, headerLines, headers, i, idx, len, line, start, trim, _i, _j, _len, _ref, _ref1;\n      divider = data.search(RegExp(\"\" + Byte.LF + Byte.LF));\n      headerLines = data.substring(0, divider).split(Byte.LF);\n      command = headerLines.shift();\n      headers = {};\n      trim = function (str) {\n        return str.replace(/^\\s+|\\s+$/g, '');\n      };\n      _ref = headerLines.reverse();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        line = _ref[_i];\n        idx = line.indexOf(':');\n        headers[trim(line.substring(0, idx))] = trim(line.substring(idx + 1));\n      }\n      body = '';\n      start = divider + 2;\n      if (headers['content-length']) {\n        len = parseInt(headers['content-length']);\n        body = ('' + data).substring(start, start + len);\n      } else {\n        chr = null;\n        for (i = _j = start, _ref1 = data.length; start <= _ref1 ? _j < _ref1 : _j > _ref1; i = start <= _ref1 ? ++_j : --_j) {\n          chr = data.charAt(i);\n          if (chr === Byte.NULL) {\n            break;\n          }\n          body += chr;\n        }\n      }\n      return new Frame(command, headers, body);\n    };\n\n    Frame.unmarshall = function (datas) {\n      var data;\n      return (function () {\n        var _i, _len, _ref, _results;\n        _ref = datas.split(RegExp(\"\" + Byte.NULL + Byte.LF + \"*\"));\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          data = _ref[_i];\n          if ((data != null ? data.length : void 0) > 0) {\n            _results.push(unmarshallSingle(data));\n          }\n        }\n        return _results;\n      })();\n    };\n\n    Frame.marshall = function (command, headers, body) {\n      var frame;\n      frame = new Frame(command, headers, body);\n      return frame.toString() + Byte.NULL;\n    };\n\n    return Frame;\n\n  })();\n\n  Client = (function () {\n    var now;\n\n    function Client (ws) {\n      this.ws = ws;\n      this.ws.binaryType = \"arraybuffer\";\n      this.counter = 0;\n      this.connected = false;\n      this.heartbeat = {\n        outgoing: 10000,\n        incoming: 10000\n      };\n      this.maxWebSocketFrameSize = 16 * 1024;\n      this.subscriptions = {};\n    }\n\n    Client.prototype.debug = function (message) {\n      var _ref;\n      return typeof window !== \"undefined\" && window !== null ? (_ref = window.console) != null ? _ref.log(message) : void 0 : void 0;\n    };\n\n    now = function () {\n      if (Date.now) {\n        return Date.now();\n      } else {\n        return new Date().valueOf;\n      }\n    };\n\n    Client.prototype._transmit = function (command, headers, body) {\n      var out;\n      out = Frame.marshall(command, headers, body);\n      if (typeof this.debug === \"function\") {\n        this.debug(\">>> \" + out);\n      }\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        if (out.length > this.maxWebSocketFrameSize) {\n          this.ws.send(out.substring(0, this.maxWebSocketFrameSize));\n          out = out.substring(this.maxWebSocketFrameSize);\n          if (typeof this.debug === \"function\") {\n            this.debug(\"remaining = \" + out.length);\n          }\n        } else {\n          return this.ws.send(out);\n        }\n      }\n    };\n\n    Client.prototype._setupHeartbeat = function (headers) {\n      var serverIncoming, serverOutgoing, ttl, v, _ref, _ref1;\n      if ((_ref = headers.version) !== Stomp.VERSIONS.V1_1 && _ref !== Stomp.VERSIONS.V1_2) {\n        return;\n      }\n      _ref1 = (function () {\n        var _i, _len, _ref1, _results;\n        _ref1 = headers['heart-beat'].split(\",\");\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          v = _ref1[_i];\n          _results.push(parseInt(v));\n        }\n        return _results;\n      })(), serverOutgoing = _ref1[0], serverIncoming = _ref1[1];\n      if (!(this.heartbeat.outgoing === 0 || serverIncoming === 0)) {\n        ttl = Math.max(this.heartbeat.outgoing, serverIncoming);\n        if (typeof this.debug === \"function\") {\n          this.debug(\"send PING every \" + ttl + \"ms\");\n        }\n        this.pinger = Stomp.setInterval(ttl, (function (_this) {\n          return function () {\n            _this.ws.send(Byte.LF);\n            return typeof _this.debug === \"function\" ? _this.debug(\">>> PING\") : void 0;\n          };\n        })(this));\n      }\n      if (!(this.heartbeat.incoming === 0 || serverOutgoing === 0)) {\n        ttl = Math.max(this.heartbeat.incoming, serverOutgoing);\n        if (typeof this.debug === \"function\") {\n          this.debug(\"check PONG every \" + ttl + \"ms\");\n        }\n        return this.ponger = Stomp.setInterval(ttl, (function (_this) {\n          return function () {\n            var delta;\n            delta = now() - _this.serverActivity;\n            if (delta > ttl * 2) {\n              if (typeof _this.debug === \"function\") {\n                _this.debug(\"did not receive server activity for the last \" + delta + \"ms\");\n              }\n              return _this.ws.close();\n            }\n          };\n        })(this));\n      }\n    };\n\n    Client.prototype._parseConnect = function () {\n      var args, connectCallback, errorCallback, headers;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      headers = {};\n      switch (args.length) {\n        case 2:\n          headers = args[0], connectCallback = args[1];\n          break;\n        case 3:\n          if (args[1] instanceof Function) {\n            headers = args[0], connectCallback = args[1], errorCallback = args[2];\n          } else {\n            headers.login = args[0], headers.passcode = args[1], connectCallback = args[2];\n          }\n          break;\n        case 4:\n          headers.login = args[0], headers.passcode = args[1], connectCallback = args[2], errorCallback = args[3];\n          break;\n        default:\n          headers.login = args[0], headers.passcode = args[1], connectCallback = args[2], errorCallback = args[3], headers.host = args[4];\n      }\n      return [headers, connectCallback, errorCallback];\n    };\n\n    Client.prototype.connect = function () {\n      var args, errorCallback, headers, out;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      out = this._parseConnect.apply(this, args);\n      headers = out[0], this.connectCallback = out[1], errorCallback = out[2];\n      if (typeof this.debug === \"function\") {\n        this.debug(\"Opening Web Socket...\");\n      }\n      this.ws.onmessage = (function (_this) {\n        return function (evt) {\n          var arr, c, client, data, frame, messageID, onreceive, subscription, _i, _len, _ref, _results;\n          data = typeof ArrayBuffer !== 'undefined' && evt.data instanceof ArrayBuffer ?\n            (arr = new Uint8Array(evt.data), typeof _this.debug === \"function\" ? _this.debug(\"--- got data length: \" + arr.length)\n              : void 0, ((function () {\n                var _i, _len, _results;\n                _results = [];\n                for (_i = 0, _len = arr.length; _i < _len; _i++) {\n                  c = arr[_i];\n                  _results.push(String.fromCharCode(c));\n                }\n                return _results;\n              })()).join('')) : evt.data;\n          _this.serverActivity = now();\n          if (data === Byte.LF) {\n            if (typeof _this.debug === \"function\") {\n              _this.debug(\"<<< PONG\");\n            }\n            return;\n          }\n          if (typeof _this.debug === \"function\") {\n            _this.debug(\"<<< \" + data);\n          }\n          _ref = Frame.unmarshall(data);\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            frame = _ref[_i];\n            switch (frame.command) {\n              case \"CONNECTED\":\n                if (typeof _this.debug === \"function\") {\n                  _this.debug(\"connected to server \" + frame.headers.server);\n                }\n                _this.connected = true;\n                _this._setupHeartbeat(frame.headers);\n                _results.push(typeof _this.connectCallback === \"function\" ? _this.connectCallback(frame) : void 0);\n                break;\n              case \"MESSAGE\":\n                subscription = frame.headers.subscription;\n                onreceive = _this.subscriptions[subscription] || _this.onreceive;\n                if (onreceive) {\n                  client = _this;\n                  messageID = frame.headers[\"message-id\"];\n                  frame.ack = function (headers) {\n                    if (headers == null) {\n                      headers = {};\n                    }\n                    return client.ack(messageID, subscription, headers);\n                  };\n                  frame.nack = function (headers) {\n                    if (headers == null) {\n                      headers = {};\n                    }\n                    return client.nack(messageID, subscription, headers);\n                  };\n                  _results.push(onreceive(frame));\n                } else {\n                  _results.push(typeof _this.debug === \"function\" ? _this.debug(\"Unhandled received MESSAGE: \" + frame) : void 0);\n                }\n                break;\n              case \"RECEIPT\":\n                _results.push(typeof _this.onreceipt === \"function\" ? _this.onreceipt(frame) : void 0);\n                break;\n              case \"ERROR\":\n                _results.push(typeof errorCallback === \"function\" ? errorCallback(frame) : void 0);\n                break;\n              default:\n                _results.push(typeof _this.debug === \"function\" ? _this.debug(\"Unhandled frame: \" + frame) : void 0);\n            }\n          }\n          return _results;\n        };\n      })(this);\n      this.ws.onclose = (function (_this) {\n        return function () {\n          var msg;\n          msg = \"Whoops! Lost connection to \" + _this.ws.url;\n          if (typeof _this.debug === \"function\") {\n            _this.debug(msg);\n          }\n          _this._cleanUp();\n          return typeof errorCallback === \"function\" ? errorCallback(msg) : void 0;\n        };\n      })(this);\n      return this.ws.onopen = (function (_this) {\n        return function () {\n          if (typeof _this.debug === \"function\") {\n            _this.debug('Web Socket Opened...');\n          }\n          headers[\"accept-version\"] = Stomp.VERSIONS.supportedVersions();\n          headers[\"heart-beat\"] = [_this.heartbeat.outgoing, _this.heartbeat.incoming].join(',');\n          return _this._transmit(\"CONNECT\", headers);\n        };\n      })(this);\n    };\n\n    Client.prototype.disconnect = function (disconnectCallback, headers) {\n      if (headers == null) {\n        headers = {};\n      }\n      this._transmit(\"DISCONNECT\", headers);\n      this.ws.onclose = null;\n      this.ws.close();\n      this._cleanUp();\n      return typeof disconnectCallback === \"function\" ? disconnectCallback() : void 0;\n    };\n\n    Client.prototype._cleanUp = function () {\n      this.connected = false;\n      if (this.pinger) {\n        Stomp.clearInterval(this.pinger);\n      }\n      if (this.ponger) {\n        return Stomp.clearInterval(this.ponger);\n      }\n    };\n\n    Client.prototype.send = function (destination, headers, body) {\n      if (headers == null) {\n        headers = {};\n      }\n      if (body == null) {\n        body = '';\n      }\n      headers.destination = destination;\n      return this._transmit(\"SEND\", headers, body);\n    };\n\n    Client.prototype.subscribe = function (destination, callback, headers) {\n      var client;\n      if (headers == null) {\n        headers = {};\n      }\n      if (!headers.id) {\n        headers.id = \"sub-\" + this.counter++;\n      }\n      headers.destination = destination;\n      this.subscriptions[headers.id] = callback;\n      this._transmit(\"SUBSCRIBE\", headers);\n      client = this;\n      return {\n        id: headers.id,\n        unsubscribe: function () {\n          return client.unsubscribe(headers.id);\n        }\n      };\n    };\n\n    Client.prototype.unsubscribe = function (id) {\n      delete this.subscriptions[id];\n      return this._transmit(\"UNSUBSCRIBE\", {\n        id: id\n      });\n    };\n\n    Client.prototype.begin = function (transaction) {\n      var client, txid;\n      txid = transaction || \"tx-\" + this.counter++;\n      this._transmit(\"BEGIN\", {\n        transaction: txid\n      });\n      client = this;\n      return {\n        id: txid,\n        commit: function () {\n          return client.commit(txid);\n        },\n        abort: function () {\n          return client.abort(txid);\n        }\n      };\n    };\n\n    Client.prototype.commit = function (transaction) {\n      return this._transmit(\"COMMIT\", {\n        transaction: transaction\n      });\n    };\n\n    Client.prototype.abort = function (transaction) {\n      return this._transmit(\"ABORT\", {\n        transaction: transaction\n      });\n    };\n\n    Client.prototype.ack = function (messageID, subscription, headers) {\n      if (headers == null) {\n        headers = {};\n      }\n      headers[\"message-id\"] = messageID;\n      headers.subscription = subscription;\n      return this._transmit(\"ACK\", headers);\n    };\n\n    Client.prototype.nack = function (messageID, subscription, headers) {\n      if (headers == null) {\n        headers = {};\n      }\n      headers[\"message-id\"] = messageID;\n      headers.subscription = subscription;\n      return this._transmit(\"NACK\", headers);\n    };\n\n    return Client;\n\n  })();\n\n  Stomp = {\n    VERSIONS: {\n      V1_0: '1.0',\n      V1_1: '1.1',\n      V1_2: '1.2',\n      supportedVersions: function () {\n        return '1.1,1.0';\n      }\n    },\n    client: function (url, protocols) {\n      var klass, ws;\n      if (protocols == null) {\n        protocols = ['v10.stomp', 'v11.stomp'];\n      }\n      klass = Stomp.WebSocketClass || WebSocket;\n      ws = new klass(url, protocols);\n      return new Client(ws);\n    },\n    over: function (ws) {\n      return new Client(ws);\n    },\n    Frame: Frame\n  };\n\n  if (typeof exports !== \"undefined\" && exports !== null) {\n    exports.Stomp = Stomp;\n  }\n\n  if (typeof window !== \"undefined\" && window !== null) {\n    Stomp.setInterval = function (interval, f) {\n      return window.setInterval(f, interval);\n    };\n    Stomp.clearInterval = function (id) {\n      return window.clearInterval(id);\n    };\n    window.Stomp = Stomp;\n  } else if (!exports) {\n    self.Stomp = Stomp;\n  }\n\n}).call(this);\n\nexport default Stomp\n"]}]}